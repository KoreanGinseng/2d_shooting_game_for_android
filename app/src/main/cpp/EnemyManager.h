/******************************************************************************/
/*! @file       EnemyManager.h
    @brief      敵管理クラス定義ファイル
*******************************************************************************/

#ifndef ENEMYMANAGER_H
#define ENEMYMANAGER_H

#include "Enemy.h"
#include "EnemyPlacementCreator.h"

namespace Shooting2D
{

    /******************************************************************************/
    /*! @class CEnemyManager
        @brief  敵管理クラス
    *******************************************************************************/
    class CEnemyManager
    {
    private:

        /*! 敵の出現状況 */
        size_t          m_CurrentAppear;

        /*! 敵リスト */
        EnemyList       m_EnemyList;

        /*! 配列データ */
        CEnemyPlacement m_Placement;

    public:

        /******************************************************************************/
        /*! コンストラクタ
        *******************************************************************************/
        CEnemyManager();

        /******************************************************************************/
        /*! デストラクタ
        *******************************************************************************/
        ~CEnemyManager();

        /******************************************************************************/
        /*! 読み込み
            @param[in]      epc    敵出現情報生成機
            @return         成功 k_Success, 失敗 それ以外
        *******************************************************************************/
        MyS32 Load(EnemyPlacementCreatorPtr epc);

        /******************************************************************************/
        /*! 初期化
            @return         成功 k_Success, 失敗 それ以外
        *******************************************************************************/
        MyS32 Initialize();

        /******************************************************************************/
        /*! 更新
            @param[in]      scroll    スクロール値
            @return         成功 k_Success, 失敗 それ以外
        *******************************************************************************/
        MyS32 Update(MyFloat scroll);

        /******************************************************************************/
        /*! 描画
            @return         成功 k_Success, 失敗 それ以外
        *******************************************************************************/
        MyS32 Draw();

        /******************************************************************************/
        /*! 解放
            @return         成功 k_Success, 失敗 それ以外
        *******************************************************************************/
        MyS32 Release();

        /******************************************************************************/
        /*! 敵リスト取得
            @return         敵リスト
        *******************************************************************************/
        EnemyList& GetEnemyList()
        {
            return m_EnemyList;
        }

        /******************************************************************************/
        /*! 敵全滅フラグ取得
            @return         敵全滅フラグ
        *******************************************************************************/
        MyBool IsHideAllEnemy()
        {
            return m_CurrentAppear >= m_Placement.GetAppearCount() && m_EnemyList.size() <= 0;
        }
    };
}

#endif //ENEMYMANAGER_H
